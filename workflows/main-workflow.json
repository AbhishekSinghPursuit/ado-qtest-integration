{
  "name": "ADO User Story webhook",
  "nodes": [
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $json.qtest_url }}/api/v3/projects/{{ $json.qtest_project_id }}/requirements",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "parentId",
              "value": "={{ $json.payload.parent_id }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ \n  {\n    \"name\": $json.payload.name,\n    \"properties\": [\n      {\n        \"field_id\": $json.payload.properties[0].field_id,\n        \"field_name\": $json.payload.properties[0].field_name,\n        \"field_value\": $json.payload.properties[0].field_value\n      },\n      {\n        \"field_id\": $json.payload.properties[1].field_id,\n        \"field_name\": $json.payload.properties[1].field_name,\n        \"field_value\": $json.payload.properties[1].field_value\n      },\n      {\n        \"field_id\": $json.payload.properties[2].field_id,\n        \"field_name\": $json.payload.properties[2].field_name,\n        \"field_value\": $json.payload.properties[2].field_value\n      },\n      {\n        \"field_id\": $json.payload.properties[3].field_id,\n        \"field_name\": $json.payload.properties[3].field_name,\n        \"field_value\": $json.payload.properties[3].field_value\n      }\n    ]\n  }\n}}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1344,
        -96
      ],
      "id": "aa7039d8-9f29-42ff-995f-e37cbad20041",
      "name": "Create-HTTP Request",
      "retryOnFail": true,
      "waitBetweenTries": 2000,
      "credentials": {
        "httpBearerAuth": {
          "id": "Wht1aQNl7uNVFvx4",
          "name": "Bearer Auth account 2"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "PUT",
        "url": "={{ $('Event Switch').item.json.qtest_url }}/api/v3/projects/{{ $('Event Switch').item.json.qtest_project_id }}/requirements/{{ $json.requirementId }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "parentId",
              "value": "={{ $('Event Switch').item.json.payload.parent_id }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ \n  {\n    \"name\":$('Event Switch').item.json.payload.name,\n    \"properties\": [\n      {\n        \"field_id\": $('Event Switch').item.json.payload.properties[0].field_id,\n        \"field_name\": $('Event Switch').item.json.payload.properties[0].field_name,\n        \"field_value\": $('Event Switch').item.json.payload.properties[0].field_value\n      },\n      {\n        \"field_id\": $('Event Switch').item.json.payload.properties[1].field_id,\n        \"field_name\": $('Event Switch').item.json.payload.properties[1].field_name,\n        \"field_value\": $('Event Switch').item.json.payload.properties[1].field_value\n      },\n      {\n        \"field_id\": $('Event Switch').item.json.payload.properties[2].field_id,\n        \"field_name\": $('Event Switch').item.json.payload.properties[2].field_name,\n        \"field_value\": $('Event Switch').item.json.payload.properties[2].field_value\n      }\n    ]\n  }\n}}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2128,
        208
      ],
      "id": "ef372d32-ba02-421a-b3a5-a85ab3018cab",
      "name": "Update-HTTP Request",
      "retryOnFail": true,
      "credentials": {
        "httpBearerAuth": {
          "id": "Wht1aQNl7uNVFvx4",
          "name": "Bearer Auth account 2"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "={{ $('Event Switch').item.json.qtest_url }}/api/v3/projects/{{ $('Event Switch').item.json.qtest_project_id }}/requirements/{{ $json.requirementId }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "parentId",
              "value": "={{ $('Event Switch').item.json.payload.parent_id }}"
            }
          ]
        },
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "text"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2176,
        592
      ],
      "id": "bbc00cb1-b7f1-4817-8312-bc35bfd641e1",
      "name": "Delete-HTTP Request",
      "retryOnFail": true,
      "credentials": {
        "httpBearerAuth": {
          "id": "Wht1aQNl7uNVFvx4",
          "name": "Bearer Auth account 2"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $json.qtest_url }}/api/v3/projects/{{ $json.qtest_project_id }}/search",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"object_type\": \"requirements\",\n    \"fields\": [\n      \"id\" \n    ],\n    \"query\": \"'Azure_DevOps_ID' = {{ $json.workitem_id }}\"\n  }\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1360,
        640
      ],
      "id": "937ddee6-c01a-4c9d-986f-8e2b4df699cc",
      "name": "Search Req-HTTP Request - Delete",
      "retryOnFail": true,
      "credentials": {
        "httpBearerAuth": {
          "id": "Wht1aQNl7uNVFvx4",
          "name": "Bearer Auth account 2"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "// Extract requirement ID from search results\nconst searchResults = $input.first().json.items || [];\nconst httpResonse = $input.first().json;\n\nif(httpResonse.data){\n  return {\n    json: {\n      data: httpResonse.data,\n      dataFound: true,\n      error_message: httpResonse.data.trim(),\n      status_code: -1,\n      operation: \"searched_for_delete\",\n      original_data: {\n        eventType: $('Event Switch').first().json.eventType,\n        qtest_url: $('Event Switch').first().json.qtest_url,\n        qtest_project_id: $('Event Switch').first().json.qtest_project_id,\n        workitem_id: $('Event Switch').first().json.workitem_id,\n        attempts: $('Event Switch').first().json.retryCount,\n        projectName: $('Event Switch').first().json.projectName,\n      },\n      projectConfig: $('Event Switch').first().json.projectConfig\n    }\n  }\n}\n\nif (searchResults.length > 0) {\n  const requirement = searchResults[0];\n  \n  // Pass through both the requirement ID and the deleted data from Azure DevOps\n  return {\n    json: {\n      requirementId: requirement.id,\n      found: true,\n      dataFound: false,\n      azureDevOpsData: $input.first().json.resource // Original Azure DevOps data\n    }\n  };\n} else {\n  const data = $('Event Switch').first().json;\n  return {\n    json: {\n      requirementId: null,\n      found: false,\n      dataFound: false,\n      error_message: \"Requirement ID couldn't be extracted from the payload data that has been sent! - \" + (searchResults.length>0 ? httpResonse.error.message : \"Search requirement failed!\") ,\n      status_code: searchResults.length>0 ? httpResonse.error.status : -1 || -1,\n      operation: \"searched_for_delete\",\n      original_data: {\n        eventType: httpResonse.eventType || data.eventType || 'N/A',\n        qtest_url: httpResonse.qtest_url || data.qtest_url || 'N/A',\n        qtest_project_id: httpResonse.qtest_project_id || data.qtest_project_id || 'N/A',\n        workitem_id: httpResonse.workitem_id || data.workitem_id || 'N/A',\n        attempts: httpResonse.retryCount || data.retryCount || 0,\n        projectName: httpResonse.projectName || data.projectName || 'N/A',\n      },\n      projectConfig: httpResonse.projectConfig || data.projectConfig || 'N/A',\n      azureDevOpsData: $input.first().json.resource\n    }\n  };\n}\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1552,
        640
      ],
      "id": "e230ecab-0204-40e4-bd50-e2b70fe6ceaa",
      "name": "Extract Req Id - JS - Delete"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e76bf62f-ac20-4255-b4c1-f73d4054dd2d",
              "leftValue": "={{ $json.found }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1952,
        608
      ],
      "id": "99d872c9-681e-47bd-b993-179d6585055d",
      "name": "Req Found? Delete"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.eventType }}",
                    "rightValue": "workItem.created",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "e1965587-0695-430c-b5ce-ea78264b28ef"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Created"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "78444353-6c2d-4f78-97e2-3276396b7e2c",
                    "leftValue": "={{ $json.eventType }}",
                    "rightValue": "workItem.updated",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Updated"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "3905617e-1f34-4d92-8a17-0d21e424181e",
                    "leftValue": "={{ $json.eventType }}",
                    "rightValue": "workItem.deleted",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Deleted"
            }
          ]
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        1056,
        240
      ],
      "id": "a9e84a2d-edd6-4875-b8f5-2493ac38a43b",
      "name": "Event Switch",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "multipleMethods": true,
        "httpMethod": [
          "POST"
        ],
        "path": "azure-dev-ops-task",
        "responseMode": "lastNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        240,
        272
      ],
      "id": "aaf1f111-bf89-4e98-8c7b-0db015adff32",
      "name": "Event Webhook",
      "webhookId": "87b5a185-7ccd-495f-be6e-6ee2a1ad0da3",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $json.qtest_url }}/api/v3/projects/{{ $json.qtest_project_id }}/search",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"object_type\": \"requirements\",\n    \"fields\": [\n      \"id\" \n    ],\n    \"query\": \"'Azure_DevOps_ID' = {{ $json.workitem_id }}\"\n  }\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1344,
        256
      ],
      "id": "37172bcd-42f4-4357-8d0d-b79ca20c964d",
      "name": "Search Req-HTTP Request - Update",
      "alwaysOutputData": false,
      "retryOnFail": true,
      "credentials": {
        "httpBearerAuth": {
          "id": "Wht1aQNl7uNVFvx4",
          "name": "Bearer Auth account 2"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "// Extract requirement ID from search results\nconst searchResults = $input.first().json.items || [];\nconst httpResonse = $input.first().json;\n\nif(httpResonse.data){\n  return {\n    json: {\n      data: httpResonse.data,\n      dataFound: true,\n      error_message: httpResonse.data.trim(),\n      status_code: -1,\n      operation: \"searched_for_update\",\n      original_data: {\n        eventType: $('Event Switch').first().json.eventType,\n        qtest_url: $('Event Switch').first().json.qtest_url,\n        qtest_project_id: $('Event Switch').first().json.qtest_project_id,\n        workitem_id: $('Event Switch').first().json.workitem_id,\n        attempts: $('Event Switch').first().json.retryCount,\n        projectName: $('Event Switch').first().json.projectName,\n      },\n      projectConfig: $('Event Switch').first().json.projectConfig\n    }\n  }\n}\n\nif (searchResults.length > 0) {\n  const requirement = searchResults[0];\n  \n  // Pass through both the requirement ID and the updated data from Azure DevOps\n  return {\n    json: {\n      requirementId: requirement.id,\n      found: true,\n      dataFound: false,\n      azureDevOpsData: $input.first().json.resource // Original Azure DevOps data\n    }\n  };\n} else {\n  const data = $('Event Switch').first().json;\n  return {\n    json: {\n      requirementId: null,\n      found: false,\n      dataFound: false,\n      error_message: \"Requirement ID couldn't be extracted from the payload data that has been sent! - \" + (searchResults.length>0 ? httpResonse.error.message : \"Search requirement failed!\") ,\n      status_code: searchResults.length>0 ? httpResonse.error.status : -1 || -1,\n      operation: \"searched_for_update\",\n      original_data: {\n        eventType: httpResonse.eventType || data.eventType || 'N/A',\n        qtest_url: httpResonse.qtest_url || data.qtest_url || 'N/A',\n        qtest_project_id: httpResonse.qtest_project_id || data.qtest_project_id || 'N/A',\n        workitem_id: httpResonse.workitem_id || data.workitem_id || 'N/A',\n        attempts: httpResonse.retryCount || data.retryCount || 0,\n        projectName: httpResonse.projectName || data.projectName || 'N/A',\n      },\n      projectConfig: httpResonse.projectConfig || data.projectConfig || 'N/A',\n      azureDevOpsData: $input.first().json.resource\n    }\n  };\n}\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1536,
        256
      ],
      "id": "be8641f0-272c-4037-93c1-9c461670f8a4",
      "name": "Extract Req Id - JS - Update"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e76bf62f-ac20-4255-b4c1-f73d4054dd2d",
              "leftValue": "={{ $json.found }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1920,
        224
      ],
      "id": "d8a05c69-f107-4cbb-bb86-732f04132a53",
      "name": "Req Found? Update"
    },
    {
      "parameters": {
        "jsCode": "// Extract project information\nconst webhookData = $input.first().json.body;\n\nlet azureProjectName = \"\";\nif (webhookData.eventType===\"workitem.updated\") {\n  azureProjectName = webhookData.resource.revision.fields['System.TeamProject'] || \n                         webhookData.resourceContainers?.project?.name ||\n                         \"Unknown\";\n}else {\n  azureProjectName = webhookData.resource.fields['System.TeamProject'] || \n                         webhookData.resourceContainers?.project?.name ||\n                         \"Unknown\";\n}\n\n\n// Just identify the project, don't load credentials yet\nreturn {\n  json: {\n    webhookData: webhookData,\n    azureProjectName: azureProjectName,\n    eventType: webhookData.eventType\n  }\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        416,
        272
      ],
      "id": "08628cff-61aa-4184-be93-8bf652dbf9a1",
      "name": "Load Configurations - JS"
    },
    {
      "parameters": {
        "jsCode": "// Configuration for Project 1 ONLY\n// No credentials here - just field mappings\nconst config = {\n  \"FabrikamCloud\": { \n    qtest_project_id: 23617, \n    qtest_url: \"https://psdl.qtestnet.com\", \n    qtest_token_name: \"qTest demo Project API\", \n    field_mappings: { \n      description: 2295013, \n      azure_devops_id: 2297555, \n      ado_url: 2297556, \n      created_by: 2297558 \n    }, \n    parent_requirement_id: 5209219, \n    default_status: \"Draft\" \n  }, \n  \"nodeautomation\": { \n    qtest_project_id: 23617, \n    qtest_url: \"https://psdl.qtestnet.com\", \n    qtest_token_name: \"qTest demo Project API\", \n    field_mappings: { \n      description: 2295013, \n      azure_devops_id: 2297555, \n      ado_url: 2297556, \n      created_by: 2297558 \n    }, \n    parent_requirement_id: 5209219, \n    default_status: \"Draft\" \n  }, \n  \"FabrikamCloud1\": { \n    qtest_project_id: 23514, \n    qtest_url: \"https://office000test.qtestnet.com\", \n    qtest_token: \"token_for_project2\", \n    field_mappings: { \n      description: 2285539, \n      azure_devops_id: 2285607, \n      ado_url: 2285602, \n      created_by: 2285600 \n    }, \n    parent_requirement_id: 5198870, \n    default_status: \"New\" \n  }\n};\n\n// Toggle manual error injection for testing\nconst simulateManualError = false; // Set to true for testing\nif (simulateManualError) {\n  throw new Error('Manual error injected for retry test!');\n}\n\nconst simulateInvalidUrl = false; // Set to true for URL error test\nif (simulateInvalidUrl) {\n  config[\"FabrikamCloud\"].qtest_url += '/INVALID_PATH_SEGMENT';\n}\n\n\n\n// Get webhook data\nconst webhookData = $input.first().json.webhookData;\nconst workItem = webhookData.resource;\nconst projectName = $input.first().json.azureProjectName;\nconst errorSim = $input.first().json.errorSimulation;\n\n\nconst now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nlet qtest_project_id, qtest_url;\ntry {\n  qtest_project_id = (projectName && projectName!==\"\") ? config[projectName].qtest_project_id : -1;\n  qtest_url = (projectName && projectName!==\"\") ? config[projectName].qtest_url : 'N/A';\n} catch (err) {\n  return {\n    error: true,\n    logFields: {\n      Timestamp: now,\n      Event_Type: webhookData.eventType || 'unknown',\n      Project_Name: projectName || 'N/A',\n      Work_Item_ID: workItem.id || workItem.workItemId || -1,\n      Operation: webhookData.eventType.split('.')[1] || 'N/A',\n      Error_Code: 'N/A',\n      Error_Message: err.message,\n      Attempts: 0,\n      Status: 'ERROR',\n      qTest_Project_ID: qtest_project_id || -1,\n      qTest_URL: qtest_url || 'N/A'\n    }\n  };\n}\n\nconst logFields = {\n  Timestamp: now,\n  Event_Type: webhookData.eventType || 'unknown',\n  Project_Name: projectName || 'N/A',\n  Work_Item_ID: workItem.id || workItem.workItemId || -1,\n  Operation: webhookData.eventType.split('.')[1] || 'N/A',\n  Error_Code: 'N/A',\n  Error_Message: 'Something bad happened while creating payload!',\n  Attempts: 0,\n  Status: 'ERROR',\n  qTest_Project_ID: qtest_project_id || -1,\n  qTest_URL: qtest_url || 'N/A'\n};\n\nif (!webhookData || !workItem || !projectName || projectName===''){  \n  if (!workItem.fields?.['System.Title'] && !workItem.revision.fields?.['System.Title']) {\n    logFields.Error_Message = \"Missing title in Azure DevOps webhook payload\";\n  }\n  \n  // Append to Google Sheets (errors)\n  return { \n    json: {\n      error: true,\n      logFields\n    } \n  };\n}\n\n\n\nlet name = \"  \";\nlet desc = \"  \";\nlet workitemid = -1;\n\nif(webhookData.eventType===\"workitem.updated\"){\n  name = workItem.revision.fields[\"System.Title\"];\n  desc = workItem.revision.fields[\"System.Description\"];\n  workitemid = workItem.workItemId>0 ? workItem.workItemId : workItem.revision.id || -1;\n}else{\n  name = workItem.fields[\"System.Title\"];\n  desc = workItem.fields[\"System.Description\"];\n  workitemid = workItem.id;\n}\n\n// Build qTest payload\nconst qTestPayload = {\n  name: name || '  ', \n  parent_id: config[projectName].parent_requirement_id, \n  properties: [ \n    { \n      field_id: config[projectName].field_mappings.description, \n      field_name: \"Description\",\n      field_value: desc || '  '\n    }, \n    { \n      field_id: config[projectName].field_mappings.azure_devops_id, \n      field_name: \"Azure_DevOps_ID\",\n      field_value: workitemid\n    }, \n    { \n      field_id: config[projectName].field_mappings.ado_url, \n      field_name: \"ADO Link\",\n      field_value: workItem._links?.html?.href || \"https://dev.azure.com/\" \n    }, \n    { \n      field_id: config[projectName].field_mappings.created_by, \n      field_name: \"Created By\",\n      field_value: String(workItem.fields['System.CreatedBy']) || ''\n    } \n  ] \n};\n\n\n\nreturn {\n  json: {\n    error: false,\n    eventType: $input.first().json.eventType,\n    payload: qTestPayload,\n    qtest_url: config[projectName].qtest_url,\n    qtest_project_id: config[projectName].qtest_project_id,\n    workitem_id: workitemid,\n    errorSimulation: errorSim,\n    retryCount: $input.first().json.retryCount || 0,\n    projectName: projectName,\n    projectConfig: config\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        624,
        272
      ],
      "id": "082ec9a1-2d8b-45f6-898f-112526a92da2",
      "name": "Build Dynamic Payload - JS",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a0b27ed8-4e41-47a4-8c6c-2ee55425d834",
              "leftValue": "={{ $json.error }}",
              "rightValue": false,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        816,
        272
      ],
      "id": "6df4f0c4-3f84-4e31-8c5a-e4379c04217e",
      "name": "is payload created successfully?"
    },
    {
      "parameters": {
        "jsCode": "const now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nconst data = $input.first().json;\nconst project = data.original_data.projectConfig?.azure_project_name || data.original_data.projectName || '';\nconst qtest_project_id = !data.original_data.data ? data.original_data.qtest_project_id : -1 || '';\nconst qtest_url = !data.original_data.data ? data.original_data.qtest_url : \"N/A\" || data.qtest_url || '';\nconst msg = data.error_message || \"\";\n\nreturn {\n  json: {\n    Timestamp: now,\n    Event_Type: $('Event Switch').first().json.eventType || 'unknown',\n    Project_Name: project!== \"\" ? project : 'N/A',\n    Work_Item_ID: data.original_data.workitem_id || -1,\n    Operation: data.operation || '',\n    Error_Code: data.status_code || '',\n    Error_Message: msg,\n    Attempts: data.attempts || data.retry_count || 0,\n    Status: data.status || 'ERROR',\n    qTest_Requirement_ID: !data.original_data.data ? data.original_data.workitem_id : -1 || '',\n    qTest_Project_ID: qtest_project_id,\n    qTest_URL: qtest_url\n  }\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1936,
        -32
      ],
      "id": "67a147d5-58c4-4c31-a038-a66f687823f4",
      "name": "Error Logging Node - Create"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e98950de-81fe-4230-82a3-8bd6a876da77",
              "leftValue": "={{ $json.dataFound }}",
              "rightValue": false,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            },
            {
              "id": "c692b1d1-655e-4607-9953-9e7d63cc7d54",
              "leftValue": "={{ $json.found }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1712,
        256
      ],
      "id": "0b1b6142-e1de-4ca0-ad1e-5e4e846a2d15",
      "name": "Is search succeeded? Update"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "850691c9-0a9a-4688-add9-d397b95287a3",
              "leftValue": "={{ $json.dataFound }}",
              "rightValue": false,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            },
            {
              "id": "d3f09fe6-a742-4c4f-84a1-94754b445ae1",
              "leftValue": "={{ $json.found }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1744,
        640
      ],
      "id": "209ab907-9fe9-4324-a2ea-45e8f93ac488",
      "name": "Is search succeeded? Delete"
    },
    {
      "parameters": {
        "jsCode": "const now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nconst data = $input.first().json;\nconst project = data.original_data.projectConfig?.azure_project_name || data.original_data.projectName || '';\nconst qtest_project_id = !data.original_data.data ? data.original_data.qtest_project_id : -1 || '';\nconst qtest_url = !data.original_data.data ? data.original_data.qtest_url : \"N/A\" || data.qtest_url || '';\nconst msg = data.error_message || \"\";\n\nreturn {\n  json: {\n    Timestamp: now,\n    Event_Type: $input.first().json.original_data.eventType || 'unknown',\n    Project_Name: project!== \"\" ? project : 'N/A',\n    Work_Item_ID: data.original_data.workitem_id || -1,\n    Operation: data.operation || '',\n    Error_Code: data.status_code || '',\n    Error_Message: msg,\n    Attempts: data.attempts || data.retry_count || 0,\n    Status: data.status || 'ERROR',\n    qTest_Requirement_ID: !data.original_data.data ? data.original_data.workitem_id : -1 || '',\n    qTest_Project_ID: qtest_project_id,\n    qTest_URL: qtest_url\n  }\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1920,
        384
      ],
      "id": "6b93c220-f9b8-4d21-bf2a-c9b726103a78",
      "name": "Error Logging Node - Search-Update"
    },
    {
      "parameters": {
        "jsCode": "const now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nconst data = $input.first().json;\nconst project = data.original_data.projectConfig?.azure_project_name || data.original_data.projectName || '';\nconst qtest_project_id = !data.original_data.data ? data.original_data.qtest_project_id : -1 || '';\nconst qtest_url = !data.original_data.data ? data.original_data.qtest_url : \"N/A\" || data.qtest_url || '';\nconst msg = data.error_message || \"\";\n\nreturn {\n  json: {\n    Timestamp: now,\n    Event_Type: $input.first().json.original_data.eventType || 'unknown',\n    Project_Name: project!== \"\" ? project : 'N/A',\n    Work_Item_ID: data.original_data.workitem_id || -1,\n    Operation: data.operation || '',\n    Error_Code: data.status_code || '',\n    Error_Message: msg,\n    Attempts: data.attempts || data.retry_count || 0,\n    Status: data.status || 'ERROR',\n    qTest_Requirement_ID: !data.original_data.data ? data.original_data.workitem_id : -1 || '',\n    qTest_Project_ID: qtest_project_id,\n    qTest_URL: qtest_url\n  }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1952,
        768
      ],
      "id": "250adfe8-ccca-4e98-98fb-434bcc73d723",
      "name": "Error Logging Node - Search-Delete"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 829971239,
          "mode": "list",
          "cachedResultName": "Errors",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=829971239"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.Timestamp }}",
            "Event Type": "={{ $json.Event_Type }}",
            "Project Name": "={{ $json.Project_Name }}",
            "Work Item ID": "={{ $json.Work_Item_ID }}",
            "Operation": "={{ $json.Operation }}",
            "Error Code": "={{ $json.Error_Code }}",
            "Error Message": "={{ $json.Error_Message }}",
            "Attempts": "={{ $json.Attempts }}",
            "Status": "={{ $json.Status }}",
            "qTest Project ID": "={{ $json.qTest_Project_ID }}",
            "qTest URL": "={{ $json.qTest_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Code",
              "displayName": "Error Code",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Message",
              "displayName": "Error Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest URL",
              "displayName": "qTest URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2160,
        768
      ],
      "id": "c340d98c-46f0-465f-a8a8-097193a1103b",
      "name": "Add Req Search Error Log - Delete",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 829971239,
          "mode": "list",
          "cachedResultName": "Errors",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=829971239"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.Timestamp }}",
            "Event Type": "={{ $json.Event_Type }}",
            "Project Name": "={{ $json.Project_Name }}",
            "Work Item ID": "={{ $json.Work_Item_ID }}",
            "Operation": "={{ $json.Operation }}",
            "Error Code": "={{ $json.Error_Code }}",
            "Error Message": "={{ $json.Error_Message }}",
            "Attempts": "={{ $json.Attempts }}",
            "Status": "={{ $json.Status }}",
            "qTest Project ID": "={{ $json.qTest_Project_ID }}",
            "qTest URL": "={{ $json.qTest_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Code",
              "displayName": "Error Code",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Message",
              "displayName": "Error Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest URL",
              "displayName": "qTest URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2128,
        384
      ],
      "id": "38109eaf-8cf5-4754-acd2-6f0a0f9f1ea8",
      "name": "Add Req Search Error Log - Update",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nconst data = $input.first().json;\nconst project = $('Event Switch').first().json.projectName || '';\nconst qtest_project_id = $('Event Switch').first().json.qtest_project_id || '';\nconst qtest_url = $input.first().json.original_data.links[0].href || '';\nreturn {\n  json: {\n    Timestamp: now,\n    Event_Type: data.operation || 'unknown',\n    Project_Name: project,\n    Work_Item_ID: $('Event Switch').first().json.workitem_id || '',\n    Operation: data.operation || '',\n    Attempts: data.attempts || 1,\n    Status: 'SUCCESS_CREATE',\n    qTest_Requirement_ID: $input.first().json.qtest_requirement_id || '',\n    qTest_Project_ID: qtest_project_id,\n    req_parent_id: $input.first().json.original_data.parent_id || '',\n    qTest_requirement_URL: qtest_url\n  }\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1936,
        -208
      ],
      "id": "48d068f5-1a06-44f9-91a1-8a48839fc4af",
      "name": "Success Logging Node - Create"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sucesses",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.Timestamp }}",
            "Event Type": "={{ $json.Event_Type }}",
            "Project Name": "={{ $json.Project_Name }}",
            "Work Item ID": "={{ $json.Work_Item_ID }}",
            "Operation": "={{ $json.Operation }}",
            "Requirement ID": "={{ $json.qTest_Requirement_ID }}",
            "Requirement Parent ID": "={{ $json.req_parent_id }}",
            "Attempts": "={{ $json.Attempts }}",
            "Status": "={{ $json.Status }}",
            "qTest Project ID": "={{ $json.qTest_Project_ID }}",
            "qTest Requirement URL": "={{ $json.qTest_requirement_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Requirement ID",
              "displayName": "Requirement ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Requirement Parent ID",
              "displayName": "Requirement Parent ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Requirement URL",
              "displayName": "qTest Requirement URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2144,
        -208
      ],
      "id": "d15ac16b-3c0e-4393-9217-8f692ffd1a81",
      "name": "Add Success Logs to Worksheet - Create",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 829971239,
          "mode": "list",
          "cachedResultName": "Errors",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=829971239"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.Timestamp }}",
            "Event Type": "={{ $json.Event_Type }}",
            "Project Name": "={{ $json.Project_Name }}",
            "Work Item ID": "={{ $json.Work_Item_ID }}",
            "Operation": "={{ $json.Operation }}",
            "Error Code": "={{ $json.Error_Code }}",
            "Error Message": "={{ $json.Error_Message }}",
            "Attempts": "={{ $json.Attempts }}",
            "Status": "={{ $json.Status }}",
            "qTest Project ID": "={{ $json.qTest_Project_ID }}",
            "qTest URL": "={{ $json.qTest_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Code",
              "displayName": "Error Code",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Message",
              "displayName": "Error Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest URL",
              "displayName": "qTest URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2144,
        -32
      ],
      "id": "332cab2d-63a7-4d00-aeb6-9cc6ef8bfa62",
      "name": "Add Failure Logs to Worksheet- Create",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Check if HTTP request succeeded or failed\n\nconst httpResponse = $input.first().json;\nlet previousData = $input.item.json;\n\n// Check if response indicates success\nconst isSuccess = !httpResponse.error && !httpResponse.data && httpResponse.id;\n\nif (isSuccess) {\n  console.log(' Successfully updated requirement:', httpResponse.id);\n  \n  return {\n    json: {\n      success: true,\n      operation: 'updated',\n      azure_work_item_id: previousData.azure_work_item_id,\n      qtest_requirement_id: httpResponse.id,\n      qtest_requirement_name: httpResponse.name,\n      attempts: previousData.retryCount + 1 || 1,\n      original_data: previousData\n    }\n  };\n} else {\n  // Extract error details  \n  const statusCode = httpResponse.statusCode || \n                     !httpResponse.data ? httpResponse.error.status : -1 || \n                    500;\n\n  let errorMsg = \"\";\n  // Parse the JSON string into a JavaScript object\n  if(httpResponse.data){\n    const errorMessage = httpResponse.data || \n                      'Unknown error occurred';\n    try {\n      const match = errorMessage.match(/\\{.*\\}/); \n      if (match && match[0]) {\n        // match[0] contains ONLY the content inside the parentheses (the clean JSON string)\n        const jsonString = match[0]; \n        const cleanedJsonString = JSON.parse(`\"${jsonString}\"`);\n        const errorData = JSON.parse(cleanedJsonString);\n  \n        // Extract the required fields and make error message\n        errorMsg = `${errorData.title} - ${errorData.message}`;\n          \n      }\n    \n    } catch (e) {\n      errorMsg = errorMessage\n    }\n  }else {errorMsg = \"<html>\" + httpResponse.error?.message.split(\"<html>\")[1].trim() + \"<html>\" || \n                      httpResponse.message || \n                      'Unknown error occurred';}\n  \n  const previous = $('Event Switch').first().json;\n  previousData = {\n    event_type: previous.eventType || 'N/A',\n    qtest_url: previous.qtest_url || 'N/A',\n    qtest_project_id: previous.qtest_project_id || -1,\n    workitem_id: previous.workitem_id || -1,\n    retryCount: previous.retryCount || 0,\n    projectName: previous.projectName\n  };\n  \n  return {\n    json: {\n      success: false,\n      error: true,\n      operation: 'updated',\n      error_message: errorMsg,\n      status_code: statusCode,\n      status: !httpResponse.data ? httpResponse.error.code : -1 || 'ERROR',\n      retry_count: previousData.retryCount || 0,\n      max_retries: previousData.errorSimulation?.MAX_RETRIES || 3,\n      azure_work_item_id: previousData.azure_work_item_id,\n      original_data: previousData\n    }\n  };\n}\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2320,
        208
      ],
      "id": "c758408c-9b15-46b6-9f93-d6de28c12c7a",
      "name": "Check For Update Response Status"
    },
    {
      "parameters": {
        "jsCode": "// Check if HTTP request succeeded or failed\n\nconst httpResponse = $input.first().json;\nlet previousData = $input.item.json;\n\n// Check if response indicates success\nconst isSuccess = !httpResponse.error && !httpResponse.data && httpResponse.id;\n\nif (isSuccess) {\n  console.log(' Successfully created requirement:', httpResponse.id);\n  \n  return {\n    json: {\n      success: true,\n      operation: 'created',\n      azure_work_item_id: previousData.azure_work_item_id,\n      qtest_requirement_id: httpResponse.id,\n      qtest_requirement_name: httpResponse.name,\n      attempts: previousData.retryCount + 1 || 1,\n      original_data: previousData\n    }\n  };\n} else {\n  // Extract error details  \n  const statusCode = httpResponse.statusCode || \n                     !httpResponse.data ? httpResponse.error.status : -1 || \n                    500;\n\n  let errorMsg = \"\";\n  // Parse the JSON string into a JavaScript object\n  if(httpResponse.data){\n    const errorMessage = httpResponse.data || \n                      'Unknown error occurred';\n    try {\n      const match = errorMessage.match(/\\{.*\\}/); \n      if (match && match[0]) {\n        // match[0] contains ONLY the content inside the parentheses (the clean JSON string)\n        const jsonString = match[0]; \n        const cleanedJsonString = JSON.parse(`\"${jsonString}\"`);\n        const errorData = JSON.parse(cleanedJsonString);\n  \n        // Extract the required fields and make error message\n        errorMsg = `${errorData.title} - ${errorData.message}`;\n          \n      }\n    \n    } catch (e) {\n      errorMsg = errorMessage\n    }\n  }else {errorMsg = \"<html>\" + httpResponse.error?.message.split(\"<html>\")[1].trim() + \"<html>\" || \n                      httpResponse.message || \n                      'Unknown error occurred';}\n  \n  const previous = $('Event Switch').first().json;\n  previousData = {\n    event_type: previous.eventType || 'N/A',\n    qtest_url: previous.qtest_url || 'N/A',\n    qtest_project_id: previous.qtest_project_id || -1,\n    workitem_id: previous.workitem_id || -1,\n    retryCount: previous.retryCount || 0,\n    projectName: previous.projectName\n  };\n  \n  return {\n    json: {\n      success: false,\n      error: true,\n      operation: 'created',\n      error_message: errorMsg,\n      status_code: statusCode,\n      status: !httpResponse.data ? httpResponse.error.code : -1 || 'ERROR',\n      retry_count: previousData.retryCount || 0,\n      max_retries: previousData.errorSimulation?.MAX_RETRIES || 3,\n      azure_work_item_id: previousData.azure_work_item_id,\n      original_data: previousData\n    }\n  };\n}\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1536,
        -96
      ],
      "id": "ba2b8f4a-d37c-449e-9a4f-09e9d53e01cf",
      "name": "Check For Create Response Status"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f1aaa92d-3fb5-4959-98de-2b592899c88e",
              "leftValue": "={{ $json.success }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1728,
        -96
      ],
      "id": "0bc371b3-d499-466a-b888-d7323619b9a0",
      "name": "If success or failed? Create"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f1aaa92d-3fb5-4959-98de-2b592899c88e",
              "leftValue": "={{ $json.success }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2512,
        208
      ],
      "id": "3bf724b1-1aeb-47ce-a88d-2e54ed7fc492",
      "name": "If success or failed? Update"
    },
    {
      "parameters": {
        "jsCode": "const now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nconst data = $input.first().json;\nconst project = $('Event Switch').first().json.projectName || '';\nconst qtest_project_id = $('Event Switch').first().json.qtest_project_id || '';\nconst qtest_url = $input.first().json.original_data.links[0].href || '';\nreturn {\n  json: {\n    Timestamp: now,\n    Event_Type: data.operation || 'unknown',\n    Project_Name: project,\n    Work_Item_ID: $('Event Switch').first().json.workitem_id || '',\n    Operation: data.operation || '',\n    Attempts: data.attempts || 1,\n    Status: 'SUCCESS_UPDATE',\n    qTest_Requirement_ID: $input.first().json.qtest_requirement_id || '',\n    qTest_Project_ID: qtest_project_id,\n    req_parent_id: $input.first().json.original_data.parent_id || '',\n    qTest_requirement_URL: qtest_url\n  }\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2688,
        16
      ],
      "id": "dc18b839-22ee-497e-be6e-f8b2da4fea40",
      "name": "Success Logging Node - Update"
    },
    {
      "parameters": {
        "jsCode": "const now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nconst data = $input.first().json;\nconst project = data.original_data.projectConfig?.azure_project_name || data.original_data.projectName || '';\nconst qtest_project_id = !data.original_data.data ? data.original_data.qtest_project_id : -1 || '';\nconst qtest_url = !data.original_data.data ? data.original_data.qtest_url : \"N/A\" || data.qtest_url || '';\nconst msg = data.error_message || \"\";\n\nreturn {\n  json: {\n    Timestamp: now,\n    Event_Type: $('Event Switch').first().json.eventType || 'unknown',\n    Project_Name: project!== \"\" ? project : 'N/A',\n    Work_Item_ID: data.original_data.workitem_id || -1,\n    Operation: data.operation || '',\n    Error_Code: data.status_code || '',\n    Error_Message: msg,\n    Attempts: data.attempts || data.retry_count || 0,\n    Status: data.status || 'ERROR',\n    qTest_Requirement_ID: !data.original_data.data ? data.original_data.workitem_id : -1 || '',\n    qTest_Project_ID: qtest_project_id,\n    qTest_URL: qtest_url\n  }\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2688,
        224
      ],
      "id": "d0264923-14fa-4e5f-8f5b-1bf2166f9230",
      "name": "Error Logging Node - Update"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sucesses",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.Timestamp }}",
            "Event Type": "={{ $json.Event_Type }}",
            "Project Name": "={{ $json.Project_Name }}",
            "Work Item ID": "={{ $json.Work_Item_ID }}",
            "Operation": "={{ $json.Operation }}",
            "Requirement ID": "={{ $json.qTest_Requirement_ID }}",
            "Requirement Parent ID": "={{ $json.req_parent_id }}",
            "Attempts": "={{ $json.Attempts }}",
            "Status": "={{ $json.Status }}",
            "qTest Project ID": "={{ $json.qTest_Project_ID }}",
            "qTest Requirement URL": "={{ $json.qTest_requirement_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Requirement ID",
              "displayName": "Requirement ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Requirement Parent ID",
              "displayName": "Requirement Parent ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Requirement URL",
              "displayName": "qTest Requirement URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2848,
        -144
      ],
      "id": "cca7162e-66ac-4de8-bb60-00f04e3744ed",
      "name": "Add Success Logs to Worksheet - Update",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 829971239,
          "mode": "list",
          "cachedResultName": "Errors",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=829971239"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.Timestamp }}",
            "Event Type": "={{ $json.Event_Type }}",
            "Project Name": "={{ $json.Project_Name }}",
            "Work Item ID": "={{ $json.Work_Item_ID }}",
            "Operation": "={{ $json.Operation }}",
            "Error Code": "={{ $json.Error_Code }}",
            "Error Message": "={{ $json.Error_Message }}",
            "Attempts": "={{ $json.Attempts }}",
            "Status": "={{ $json.Status }}",
            "qTest Project ID": "={{ $json.qTest_Project_ID }}",
            "qTest URL": "={{ $json.qTest_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Code",
              "displayName": "Error Code",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Message",
              "displayName": "Error Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest URL",
              "displayName": "qTest URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2848,
        64
      ],
      "id": "45931184-73c5-40f0-9f0f-6f8770333d32",
      "name": "Add Failure Logs to Worksheet - Update",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Check if HTTP request succeeded or failed\nconst httpResponse = $input.first().json;\nconst previous = $('Event Switch').first().json;\nconst previousData = {\n    event_type: previous.eventType || 'N/A',\n    qtest_url: previous.qtest_url || 'N/A',\n    qtest_project_id: previous.qtest_project_id || -1,\n    workitem_id: previous.workitem_id || -1,\n    retryCount: previous.retryCount || 0,\n    projectName: previous.projectName || 'unknown',\n    req_parent_id: previous.payload.parent_id || -1\n  };\n\n\nconst data = $('Req Found? Delete').first().json;\n// Check if response indicates success\nconst isSuccess = !httpResponse.found && data.found===true && !httpResponse.error && !httpResponse.data && data.requirementId;\n\nif (isSuccess) {\n  console.log(' Successfully deleted requirement:', httpResponse.id);\n  \n  return {\n    json: {\n      success: true,\n      operation: 'deleted',\n      azure_work_item_id: data.workitem_id,\n      qtest_requirement_id: $('Search Req-HTTP Request - Delete').first().json.items[0].id,\n      qtest_requirement_name: httpResponse.name,\n      attempts: previousData.retryCount + 1 || 1,\n      original_data: previousData\n    }\n  };\n} else {\n  // Extract error details  \n  const statusCode = httpResponse.statusCode || \n                     !httpResponse.data ? httpResponse.error.status : -1 || \n                    500;\n\n  let errorMsg = \"\";\n  // Parse the JSON string into a JavaScript object\n  if(httpResponse.data){\n    const errorMessage = httpResponse.data || \n                      'Unknown error occurred';\n    try {\n      const match = errorMessage.match(/\\{.*\\}/); \n      if (match && match[0]) {\n        // match[0] contains ONLY the content inside the parentheses (the clean JSON string)\n        const jsonString = match[0]; \n        const cleanedJsonString = JSON.parse(`\"${jsonString}\"`);\n        const errorData = JSON.parse(cleanedJsonString);\n  \n        // Extract the required fields and make error message\n        errorMsg = `${errorData.title} - ${errorData.message}`;\n          \n      }\n    \n    } catch (e) {\n      errorMsg = errorMessage\n    }\n  }else {errorMsg = \"<html>\" + httpResponse.error?.message.split(\"<html>\")[1].trim() + \"<html>\" || \n                      httpResponse.message || \n                      'Unknown error occurred';}\n  \n  return {\n    json: {\n      success: false,\n      error: true,\n      operation: 'deleted',\n      error_message: errorMsg,\n      status_code: statusCode,\n      status: !httpResponse.data ? httpResponse.error.code : -1 || 'ERROR',\n      retry_count: previousData.retryCount || 0,\n      max_retries: previousData.errorSimulation?.MAX_RETRIES || 3,\n      azure_work_item_id: previousData.azure_work_item_id,\n      original_data: previousData\n    }\n  };\n}\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2384,
        592
      ],
      "id": "907be21e-ae35-4716-acae-ae214564baf0",
      "name": "Check For Delete Response Status"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f1aaa92d-3fb5-4959-98de-2b592899c88e",
              "leftValue": "={{ $json.success }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2560,
        592
      ],
      "id": "b8061721-c78d-4403-ba13-33ffbc600c04",
      "name": "If success or failed? Delete"
    },
    {
      "parameters": {
        "jsCode": "const now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nconst data = $input.first().json;\nconst project = data.original_data.projectName || '';\nconst qtest_project_id = data.original_data.qtest_project_id || '';\nconst qtest_url = data.original_data.qtest_url || '';\nreturn {\n  json: {\n    Timestamp: now,\n    Event_Type: data.operation || 'unknown',\n    Project_Name: project,\n    Work_Item_ID: data.original_data.workitem_id || '',\n    Operation: data.operation || '',\n    Attempts: data.attempts || 1,\n    Status: 'SUCCESS_DELETE',\n    qTest_Requirement_ID: data.qtest_requirement_id || '',\n    qTest_Project_ID: qtest_project_id,\n    req_parent_id: data.original_data.req_parent_id || '',\n    qTest_requirement_URL: qtest_url\n  }\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2752,
        576
      ],
      "id": "dc5f6201-dd85-479b-84c4-c3b96ea570ba",
      "name": "Success Logging Node - Delete"
    },
    {
      "parameters": {
        "jsCode": "const now = new Date().toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }).slice(0,19).replace(\"T\",\" \");\nconst data = $input.first().json;\nconst project = data.original_data.projectConfig?.azure_project_name || data.original_data.projectName || '';\nconst qtest_project_id = !data.original_data.data ? data.original_data.qtest_project_id : -1 || '';\nconst qtest_url = !data.original_data.data ? data.original_data.qtest_url : \"N/A\" || data.qtest_url || '';\nconst msg = data.error_message || \"\";\n\nreturn {\n  json: {\n    Timestamp: now,\n    Event_Type: $('Event Switch').first().json.eventType || 'unknown',\n    Project_Name: project!== \"\" ? project : 'N/A',\n    Work_Item_ID: data.original_data.workitem_id || -1,\n    Operation: data.operation || '',\n    Error_Code: data.status_code || '',\n    Error_Message: msg,\n    Attempts: data.attempts || data.retry_count || 0,\n    Status: data.status || 'ERROR',\n    qTest_Requirement_ID: !data.original_data.data ? data.original_data.workitem_id : -1 || '',\n    qTest_Project_ID: qtest_project_id,\n    qTest_URL: qtest_url\n  }\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2752,
        784
      ],
      "id": "da1cc844-4643-4973-90f3-19a3f18917af",
      "name": "Error Logging Node - Delete"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sucesses",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.Timestamp }}",
            "Event Type": "={{ $json.Event_Type }}",
            "Project Name": "={{ $json.Project_Name }}",
            "Work Item ID": "={{ $json.Work_Item_ID }}",
            "Operation": "={{ $json.Operation }}",
            "Requirement ID": "={{ $json.qTest_Requirement_ID }}",
            "Requirement Parent ID": "={{ $json.req_parent_id }}",
            "Attempts": "={{ $json.Attempts }}",
            "Status": "={{ $json.Status }}",
            "qTest Project ID": "={{ $json.qTest_Project_ID }}",
            "qTest Requirement URL": "={{ $json.qTest_requirement_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Requirement ID",
              "displayName": "Requirement ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Requirement Parent ID",
              "displayName": "Requirement Parent ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Requirement URL",
              "displayName": "qTest Requirement URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2928,
        384
      ],
      "id": "b1b2f2de-a8da-4279-a4e9-298553aa7a25",
      "name": "Add Success Logs to Worksheet - Delete",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 829971239,
          "mode": "list",
          "cachedResultName": "Errors",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=829971239"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.Timestamp }}",
            "Event Type": "={{ $json.Event_Type }}",
            "Project Name": "={{ $json.Project_Name }}",
            "Work Item ID": "={{ $json.Work_Item_ID }}",
            "Operation": "={{ $json.Operation }}",
            "Error Code": "={{ $json.Error_Code }}",
            "Error Message": "={{ $json.Error_Message }}",
            "Attempts": "={{ $json.Attempts }}",
            "Status": "={{ $json.Status }}",
            "qTest Project ID": "={{ $json.qTest_Project_ID }}",
            "qTest URL": "={{ $json.qTest_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Code",
              "displayName": "Error Code",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Message",
              "displayName": "Error Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest URL",
              "displayName": "qTest URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2928,
        624
      ],
      "id": "9a2809fa-8879-418a-9fbd-a54f39fe1dc6",
      "name": "Add Failure Logs to Worksheet - Delete",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10",
          "mode": "list",
          "cachedResultName": "ADO-qTest Logs",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 829971239,
          "mode": "list",
          "cachedResultName": "Errors",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1BMQqMpBQ3M3tDj_yXCMqF0ZtFtQvxCh7Q8dXEVW2O10/edit#gid=829971239"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $json.logFields.Timestamp }}",
            "Event Type": "={{ $json.logFields.Event_Type }}",
            "Project Name": "={{ $json.logFields.Project_Name }}",
            "Work Item ID": "={{ $json.logFields.Work_Item_ID }}",
            "Operation": "={{ $json.logFields.Operation }}",
            "Error Code": "={{ $json.logFields.Error_Code }}",
            "Error Message": "={{ $json.logFields.Error_Message }}",
            "Attempts": "={{ $json.logFields.Attempts }}",
            "Status": "={{ $json.logFields.Status }}",
            "qTest Project ID": "={{ $json.logFields.qTest_Project_ID }}",
            "qTest URL": "={{ $json.logFields.qTest_URL }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Event Type",
              "displayName": "Event Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Project Name",
              "displayName": "Project Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Work Item ID",
              "displayName": "Work Item ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Operation",
              "displayName": "Operation",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Code",
              "displayName": "Error Code",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Error Message",
              "displayName": "Error Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Attempts",
              "displayName": "Attempts",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest Project ID",
              "displayName": "qTest Project ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qTest URL",
              "displayName": "qTest URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1056,
        464
      ],
      "id": "c73b2476-3851-49cf-a376-1dc392b5a84c",
      "name": "Payload creation failure Log",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "st2ZXqgfMSCKNZCh",
          "name": "qTest Log Sheet"
        }
      }
    },
    {
      "parameters": {
        "content": "# Azure DevOps  qTest Integration\n\n**Purpose:** Sync ADO work items to qTest requirements.\n**Triggers:** workitem.created, workitem.updated, workitem.deleted\n**Flows:** Create  Update  Delete\n**Auth:** qTest Bearer token (stored credential)\n**Notes:** Config-driven per ADO project",
        "height": 208,
        "width": 608,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        160,
        -320
      ],
      "typeVersion": 1,
      "id": "e30f8a79-dcd7-4ea7-9078-7e62cce4d14c",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Credentials & Error Nodes\n**Credentials:** httpBearerAuth credential named 'Bearer Auth account'\n**Errors:** HTTP requests return JSON/text - consider adding error-handling or a Logger node for failures\n**Logs:** Successful and failed executions are being logged into a Google Sheet",
        "height": 208,
        "width": 352,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        816,
        -320
      ],
      "typeVersion": 1,
      "id": "7ee6f761-b6d5-4905-822c-564459f54298",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Webhook Node\n**Purpose:** Receive Azure DevOps service hooks\n**Type:** webhook (POST)\n**Path:** azure-dev-ops-task\n**Output:** raw webhook body (eventType + resource)\n**ResponseMode:** lastNode",
        "height": 192,
        "width": 288,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -16,
        48
      ],
      "typeVersion": 1,
      "id": "b830848a-6e19-4203-a5a4-f504e9939c7a",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Build Dynamic Payload (JS)\n**Purpose:** Build qTest payload + route info\n**Outputs in item.json:** { eventType, payload, qtest_url, qtest_project_id, workitem_id }\n**Used by:** Event Switch",
        "height": 144,
        "width": 336
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        512,
        80
      ],
      "typeVersion": 1,
      "id": "cc483ce8-a482-4af5-8e15-3ce189f00d33",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## Load Configurations (JS)\n**Purpose:** Determine ADO project mapping\n**Output:** azureProjectName\n**Notes:** No credentials loaded here",
        "height": 128,
        "width": 320
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        288,
        448
      ],
      "typeVersion": 1,
      "id": "2018525f-c1b9-4e1f-a21a-5f4bd49320d4",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## Event Switch\n**Purpose:** Route by eventType  Created / Updated / Deleted\n**Inputs:** item.json.eventType\n**Outputs:** 3 branches",
        "height": 144,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        960,
        64
      ],
      "typeVersion": 1,
      "id": "c9f02c69-8cd2-4c8f-b8a0-f39418d6cce4",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "### Create Req Branch\n**Nodes:** Create-HTTP Request\n**Purpose:** POST requirement to qTest\n**Input:** payload from Build Dynamic Payload\n**Output:** created requirement response",
        "height": 128,
        "width": 336,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1344,
        -256
      ],
      "typeVersion": 1,
      "id": "39b57f48-6c27-4fa1-92c2-ab0ca3c9bbde",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "### Update Req Branch\n**Sequence:** Search Req  Extract Req Id (JS)  Req Found?  Update-HTTP Request\n**Purpose:** Locate requirement by Azure_DevOps_ID, update fields if found",
        "height": 128,
        "width": 352,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1344,
        96
      ],
      "typeVersion": 1,
      "id": "03291363-df8b-43f5-949f-24ef2d0b09dd",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "### Delete Req Branch\n**Sequence:** Search Req  Extract Req Id (JS)  Req Found?  Delete-HTTP Request\n**Purpose:** Locate requirement by Azure_DevOps_ID and delete if present",
        "height": 128,
        "width": 336,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1360,
        480
      ],
      "typeVersion": 1,
      "id": "122b694a-7971-4f9b-b8fb-a46fc1ccc447",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "content": "### Retry & Backoff Policy\n- HTTP nodes use retryOnFail:true with waitBetweenTries (2s)\n- Max retries controlled by errorSimulation.MAX_RETRIES (default 3)\n- Recommended: exponential backoff and circuit breaker for production",
        "height": 172,
        "width": 392,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1888,
        -448
      ],
      "id": "b1a243ba-dec9-483f-90e8-9a451a44701b",
      "name": "Retry Policy Note"
    },
    {
      "parameters": {
        "content": "### Error Handling Summary\n-  **All HTTP nodes -> onError:** continueErrorOutput\n- Errors flow to dedicated JS logger nodes that format for Google Sheets\n- Check 'Is search succeeded?' IF nodes to control Update/Delete paths",
        "height": 156,
        "width": 400,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1888,
        -624
      ],
      "id": "b9f5839f-7c5a-40d3-a16b-5e9bab77dddd",
      "name": "Error Handling Note"
    },
    {
      "parameters": {
        "content": "Logging & Audit\n- Success and Failure logs appended to Google Sheet\n- Sheets: Sucesses (gid=0) and Errors (gid=829971239)\n- Use timestamps and qTest IDs for traceability",
        "height": 156,
        "width": 356,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2336,
        -528
      ],
      "id": "56151ac3-4f09-49ba-8024-589bf6d69291",
      "name": "Logging & Audit Note"
    },
    {
      "parameters": {
        "content": "Testing & Troubleshooting\n- Use simulateManualError / simulateInvalidUrl flags in config for tests\n- Inspect WS payload in 'Build Dynamic Payload - JS' output\n- Re-run problematic executions with increased retryCount to debug",
        "height": 172,
        "width": 420,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2736,
        -528
      ],
      "id": "f829e34b-0cb7-4782-a3ae-a5137f0bcf13",
      "name": "Testing & Troubleshooting Note"
    },
    {
      "parameters": {
        "content": "### Credential Setup (Admin)\n- **Add httpBearerAuth credential named:** Currentl configuration 'Bearer Auth account' and 'Bearer Auth account 2' for two projects\n-  Ensure the credential has the qTest API token\n- Restrict credential access to workflow owners only",
        "height": 172,
        "width": 376,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1456,
        -528
      ],
      "id": "328f964e-415a-4316-a671-200f96ee22c6",
      "name": "Credentials (Admin) Note"
    }
  ],
  "pinData": {},
  "connections": {
    "Create-HTTP Request": {
      "main": [
        [
          {
            "node": "Check For Create Response Status",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Check For Create Response Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search Req-HTTP Request - Delete": {
      "main": [
        [
          {
            "node": "Extract Req Id - JS - Delete",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Extract Req Id - JS - Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Req Id - JS - Delete": {
      "main": [
        [
          {
            "node": "Is search succeeded? Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Req Found? Delete": {
      "main": [
        [
          {
            "node": "Delete-HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Event Switch": {
      "main": [
        [
          {
            "node": "Create-HTTP Request",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Search Req-HTTP Request - Update",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Search Req-HTTP Request - Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Event Webhook": {
      "main": [
        [
          {
            "node": "Load Configurations - JS",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search Req-HTTP Request - Update": {
      "main": [
        [
          {
            "node": "Extract Req Id - JS - Update",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Extract Req Id - JS - Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Req Id - JS - Update": {
      "main": [
        [
          {
            "node": "Is search succeeded? Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Req Found? Update": {
      "main": [
        [
          {
            "node": "Update-HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Load Configurations - JS": {
      "main": [
        [
          {
            "node": "Build Dynamic Payload - JS",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build Dynamic Payload - JS": {
      "main": [
        [
          {
            "node": "is payload created successfully?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "is payload created successfully?": {
      "main": [
        [
          {
            "node": "Event Switch",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Payload creation failure Log",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Error Logging Node - Create": {
      "main": [
        [
          {
            "node": "Add Failure Logs to Worksheet- Create",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is search succeeded? Update": {
      "main": [
        [
          {
            "node": "Req Found? Update",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Error Logging Node - Search-Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is search succeeded? Delete": {
      "main": [
        [
          {
            "node": "Req Found? Delete",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Error Logging Node - Search-Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Error Logging Node - Search-Update": {
      "main": [
        [
          {
            "node": "Add Req Search Error Log - Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Error Logging Node - Search-Delete": {
      "main": [
        [
          {
            "node": "Add Req Search Error Log - Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update-HTTP Request": {
      "main": [
        [
          {
            "node": "Check For Update Response Status",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Check For Update Response Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Success Logging Node - Create": {
      "main": [
        [
          {
            "node": "Add Success Logs to Worksheet - Create",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check For Update Response Status": {
      "main": [
        [
          {
            "node": "If success or failed? Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check For Create Response Status": {
      "main": [
        [
          {
            "node": "If success or failed? Create",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If success or failed? Create": {
      "main": [
        [
          {
            "node": "Success Logging Node - Create",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Error Logging Node - Create",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If success or failed? Update": {
      "main": [
        [
          {
            "node": "Success Logging Node - Update",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Error Logging Node - Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Success Logging Node - Update": {
      "main": [
        [
          {
            "node": "Add Success Logs to Worksheet - Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Error Logging Node - Update": {
      "main": [
        [
          {
            "node": "Add Failure Logs to Worksheet - Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete-HTTP Request": {
      "main": [
        [
          {
            "node": "Check For Delete Response Status",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Check For Delete Response Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check For Delete Response Status": {
      "main": [
        [
          {
            "node": "If success or failed? Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If success or failed? Delete": {
      "main": [
        [
          {
            "node": "Success Logging Node - Delete",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Error Logging Node - Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Success Logging Node - Delete": {
      "main": [
        [
          {
            "node": "Add Success Logs to Worksheet - Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Error Logging Node - Delete": {
      "main": [
        [
          {
            "node": "Add Failure Logs to Worksheet - Delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "versionId": "85622fa4-9a8d-4288-acd9-7e0ed9fcb2f5",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "3c3b501e61c0ae6328fd408bc78270dbae3cfb1e7f991ea60d8bbb0d3771150e"
  },
  "id": "scdz6TmeZ8NXWruT",
  "tags": []
}